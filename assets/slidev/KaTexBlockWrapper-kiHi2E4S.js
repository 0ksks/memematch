import{d as x,r as b,at as E,_ as $,y as v,C as N,f as B,o as I,j as K}from"../modules/vue-BERrszca.js";import{M as P,N as T,p as q,V as w,b as M}from"../index-C6NnsWd8.js";import{u as R}from"./context-DpMUlBcF.js";const V=x({__name:"KaTexBlockWrapper",props:{ranges:{type:Array,default:()=>[]},finally:{type:[String,Number],default:"last"},startLine:{type:Number,default:1},at:{type:[String,Number],default:"+1"}},setup(i,{expose:f}){f();const e=i,{$clicksContext:t}=R(),s=b(),o=P();E(()=>{t.unregister(o)}),$(()=>{var d;if(!t||!((d=e.ranges)!=null&&d.length))return;const{start:S,end:L,delta:A}=t.resolve(e.at,e.ranges.length-1);t.register(o,{max:L,delta:A});const g=v(()=>Math.max(0,t.current-S+1)),m=v(()=>e.finally==="last"?e.ranges.at(-1):e.finally.toString());N(()=>{if(!s.value)return;let c=e.ranges[g.value]??m.value;const _=c==="hide";s.value.classList.toggle(T,_),_&&(c=e.ranges[g.value+1]??m.value);const h=s.value.querySelectorAll(".mtable > [class*=col-align]");if(!h)return;const C=Array.from(h).map(n=>Array.from(n.querySelectorAll(":scope > .vlist-t > .vlist-r > .vlist > span > .mord"))),a=[];for(const n of C)n.forEach((l,r)=>{l&&(Array.isArray(a[r])?a[r].push(l):a[r]=[l])});const y=e.startLine,k=q(a.length+y-1,c);a.forEach((n,l)=>{const r=k.includes(l+y);n.forEach(u=>{u.classList.toggle(w,!0),u.classList.toggle("highlighted",r),u.classList.toggle("dishonored",!r)})})})});const p={props:e,clicks:t,el:s,id:o};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}}),j={ref:"el",class:"slidev-katex-wrapper"};function D(i,f,e,t,s,o){return I(),B("div",j,[K(i.$slots,"default")],512)}const H=M(V,[["render",D],["__file","/home/runner/work/memematch/memematch/node_modules/@slidev/client/builtin/KaTexBlockWrapper.vue"]]);export{H as _};
